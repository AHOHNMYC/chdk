/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

static long *nrflag = (long*)0xCF74;

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFFE6F168 - 0xFFE6F304, length=104
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FFE6F2D4 \n"

"loc_FFE6F178:\n"
"    LDR     R2, [SP] \n"
"    LDR     R3, [R2] \n"
"    MOV     R0, R2 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FFE6F2A8 \n"
"    .long   loc_FFE6F1E8 \n"
"    .long   loc_FFE6F1F4 \n"
"    .long   loc_FFE6F1FC \n"
"    .long   loc_FFE6F210 \n"
"    .long   loc_FFE6F208 \n"
"    .long   loc_FFE6F218 \n"
"    .long   loc_FFE6F220 \n"
"    .long   loc_FFE6F22C \n"
"    .long   loc_FFE6F234 \n"
"    .long   loc_FFE6F240 \n"
"    .long   loc_FFE6F248 \n"
"    .long   loc_FFE6F250 \n"
"    .long   loc_FFE6F258 \n"
"    .long   loc_FFE6F260 \n"
"    .long   loc_FFE6F268 \n"
"    .long   loc_FFE6F274 \n"
"    .long   loc_FFE6F27C \n"
"    .long   loc_FFE6F284 \n"
"    .long   loc_FFE6F28C \n"
"    .long   loc_FFE6F298 \n"
"    .long   loc_FFE6F2A0 \n"
"    .long   loc_FFE6F2BC \n"

"loc_FFE6F1E8:\n"
"    BL      sub_FFE6F814 \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FFE6D0F4 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F1F4:\n"
"    BL      sub_FFE6ED68_my \n"  // --> Patched. Old value = 0xFFE6ED68.
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F1FC:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FFE6F9E8 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F208:\n"
"    BL      sub_FFE6F3B8 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F210:\n"
"    BL      sub_FFE6F7E0 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F218:\n"
"    BL      sub_FFE6F7F0 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F220:\n"
"    BL      sub_FFE6F8F8 \n"
"    BL      sub_FFE6D0F4 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F22C:\n"
"    BL      sub_FFE6EE74 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F234:\n"
"    BL      sub_FFE6F95C \n"
"    BL      sub_FFE6D0F4 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F240:\n"
"    BL      sub_FFE6F7E0 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F248:\n"
"    BL      sub_FFE70F48 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F250:\n"
"    BL      sub_FFE71114 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F258:\n"
"    BL      sub_FFE711A8 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F260:\n"
"    BL      sub_FFE712A4 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F268:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FFE71510 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F274:\n"
"    BL      sub_FFE716C8 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F27C:\n"
"    BL      sub_FFE7175C \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F284:\n"
"    BL      sub_FFE71818 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F28C:\n"
"    BL      sub_FFE6FB3C \n"
"    BL      sub_FFE6EC8C \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F298:\n"
"    BL      sub_FFE713E4 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F2A0:\n"
"    BL      sub_FFE71440 \n"
"    B       loc_FFE6F2B8 \n"

"loc_FFE6F2A8:\n"
"    MOV     R1, #0x4C0 \n"
"    LDR     R0, =0xFFE6EAE8 /*'SsShootTask.c'*/ \n"
"    ADD     R1, R1, #0xE \n"
"    BL      _DebugAssert \n"

"loc_FFE6F2B8:\n"
"    LDR     R2, [SP] \n"

"loc_FFE6F2BC:\n"
"    LDR     R3, =0x6E2B8 \n"
"    LDR     R1, [R2, #4] \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFE81C34 /*_SetEventFlag*/ \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FFE6EB68 \n"

"loc_FFE6F2D4:\n"
"    LDR     R3, =0x6E2BC \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FFE8234C /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFE6F178 \n"
"    LDR     R0, =0xFFE6EAE8 /*'SsShootTask.c'*/ \n"
"    MOV     R1, #0x400 \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FFE6ED68_my @ 0xFFE6ED68 - 0xFFE6EE0C, length=42
void __attribute__((naked,noinline)) sub_FFE6ED68_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R4, [R0, #0xC] \n"
"    LDR     R3, [R4, #8] \n"
"    ORR     R3, R3, #1 \n"
"    STR     R3, [R4, #8] \n"
"    MOV     R0, #0xC \n"
"    BL      sub_FFE78BA4 \n"
"    TST     R0, #1 \n"
"    MOV     R0, #1 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, R0 \n"
"    BEQ     loc_FFE6EDAC \n"
"    LDR     R3, [R4, #8] \n"
"    ORR     R3, R3, #0x40000000 \n"
"    STR     R3, [R4, #8] \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFE6D604 \n"

"loc_FFE6EDAC:\n"
"    BL      sub_FFE6F800 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE70834 \n"
"    TST     R0, #1 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FFE6EDD0 \n"
"    LDMFD   SP!, {R4,LR} \n"
"    B       sub_FFE6D604 \n"

"loc_FFE6EDD0:\n"
"    BL      sub_FFC0B998 \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE71BC4 \n"
"    BL      sub_FFE72570 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE71CDC_my \n"  // --> Patched. Old value = 0xFFE71CDC.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R1, #1 \n"
"    MOV     R2, R4 \n"
"    BL      sub_FFE6D604 \n"
"    BL      sub_FFE72010 \n"
"    CMP     R0, #0 \n"
"    LDRNE   R3, [R4, #8] \n"
"    ORRNE   R3, R3, #0x2000 \n"
"    STRNE   R3, [R4, #8] \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FFE71CDC_my @ 0xFFE71CDC - 0xFFE71D34, length=23
void __attribute__((naked,noinline)) sub_FFE71CDC_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    MOV     R4, R0 \n"
"    SUB     SP, SP, #0xC \n"
"    BL      sub_FFE72704 \n"
"    MVN     R1, #0 \n"
"    BL      sub_FFE81DD0 /*_ClearEventFlag*/ \n"
"    MOV     R0, #0x8A \n"
"    ADD     R1, SP, #4 \n"
"    MOV     R2, #4 \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFE71D1C \n"
"    MOV     R1, #0x1D0 \n"
"    LDR     R0, =0xFFE71B60 /*'SsCaptureSeq.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FFE71D1C:\n"
"    LDR     R3, =0x94240 \n"
"    LDR     R2, =0x94300 \n"
"    LDR     R0, [R3, #0x74] \n"
"    LDRSH   R1, [R2, #0xE] \n"
"    BL      sub_FFDCBF04 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFE71AE4 \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFFE71D38 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFFD12C98 - 0xFFD131E0, length=339
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x20 \n"
"    ADD     R7, SP, #4 \n"
"    B       loc_FFD1319C \n"

"loc_FFD12CA8:\n"
"    CMP     R2, #0x22 \n"
"    BNE     loc_FFD12CC0 \n"
"    LDR     R0, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    B       loc_FFD12D24 \n"

"loc_FFD12CC0:\n"
"    CMP     R2, #0x1D \n"
"    BNE     loc_FFD12CD4 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD12B68 \n"
"    B       loc_FFD12D14 \n"

"loc_FFD12CD4:\n"
"    CMP     R2, #0x1E \n"
"    BNE     loc_FFD12CE8 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD12BC4 \n"
"    B       loc_FFD12D14 \n"

"loc_FFD12CE8:\n"
"    SUB     R3, R2, #0x1F \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFD12D00 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD12C20 \n"
"    B       loc_FFD12D14 \n"

"loc_FFD12D00:\n"
"    CMP     R2, #0x21 \n"
"    BNE     loc_FFD12D30 \n"
"    BL      sub_FFCDCE18 \n"
"    BL      sub_FFCDFF50 \n"
"    BL      sub_FFCDF188 \n"

"loc_FFD12D14:\n"
"    LDR     R3, [SP, #4] \n"
"    LDR     R0, [R3, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x88] \n"

"loc_FFD12D24:\n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD0E834 \n"
"    B       loc_FFD1319C \n"

"loc_FFD12D30:\n"
"    CMP     R2, #0xD \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FFD12DA0 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#2 \n"
"    ADD     R6, SP, #0x14 \n"
"    SUB     R1, R1, #8 \n"
"    MOV     R2, #0xC \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD1116C \n"
"    LDR     R3, [SP, #4] \n"
"    LDR     R1, [R3, #0x7C] \n"
"    LDR     R2, [R3, #0x8C] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x88] \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD1143C \n"
"    LDR     R3, [SP, #4] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x7C] \n"
"    LDR     R2, [R3, #0x94] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x90] \n"
"    B       loc_FFD130F0 \n"

"loc_FFD12DA0:\n"
"    SUB     R3, R2, #0xE \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFD12E5C \n"
"    ADD     R6, SP, #0x14 \n"
"    ADD     R5, SP, #8 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FFD11530 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #5 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FFD12DF4 \n"
"    LDR     R12, [SP, #4] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    B       loc_FFD12E2C \n"

"loc_FFD12DF4:\n"
"    CMP     R4, #6 \n"
"    CMPNE   R4, #2 \n"
"    BNE     loc_FFD12E3C \n"
"    LDR     R12, [SP, #4] \n"
"    MOV     R0, R5 \n"
"    MOV     R1, R8 \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    MOV     R1, R6 \n"
"    LDR     R0, [SP, #4] \n"
"    MOV     R2, R5 \n"
"    BL      sub_FFD127C8 \n"

"loc_FFD12E2C:\n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD12AFC \n"
"    B       loc_FFD130F0 \n"

"loc_FFD12E3C:\n"
"    LDR     R12, [SP, #4] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    LDR     R3, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"
"    B       loc_FFD130F0 \n"

"loc_FFD12E5C:\n"
"    SUB     R3, R2, #0x19 \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FFD12EB4 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#2 \n"
"    ADD     R6, SP, #0x14 \n"
"    SUB     R1, R1, #8 \n"
"    MOV     R2, #0xC \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD1061C \n"
"    LDR     R3, [SP, #4] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x7C] \n"
"    LDR     R2, [R3, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x88] \n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD1093C \n"
"    B       loc_FFD130F0 \n"

"loc_FFD12EB4:\n"
"    ADD     R6, SP, #0x14 \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R2, #0xC \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP, #4] \n"
"    LDR     R3, [R12] \n"
"    MOV     R2, R12 \n"
"    CMP     R3, #0x1C \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FFD130DC \n"
"    .long   loc_FFD12F54 \n"
"    .long   loc_FFD12F60 \n"
"    .long   loc_FFD12F6C \n"
"    .long   loc_FFD12F6C \n"
"    .long   loc_FFD12F54 \n"
"    .long   loc_FFD12F60 \n"
"    .long   loc_FFD12F6C \n"
"    .long   loc_FFD12F6C \n"
"    .long   loc_FFD12F90 \n"
"    .long   loc_FFD12F90 \n"
"    .long   loc_FFD130B0 \n"
"    .long   loc_FFD130BC \n"
"    .long   loc_FFD130CC \n"
"    .long   loc_FFD130DC \n"
"    .long   loc_FFD130DC \n"
"    .long   loc_FFD130DC \n"
"    .long   loc_FFD12F78 \n"
"    .long   loc_FFD12F84 \n"
"    .long   loc_FFD12FA0 \n"
"    .long   loc_FFD12FAC \n"
"    .long   loc_FFD12FE4 \n"
"    .long   loc_FFD1301C \n"
"    .long   loc_FFD13054 \n"
"    .long   loc_FFD1308C \n"
"    .long   loc_FFD1308C \n"
"    .long   loc_FFD130DC \n"
"    .long   loc_FFD130DC \n"
"    .long   loc_FFD13098 \n"
"    .long   loc_FFD130A4 \n"

"loc_FFD12F54:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F024 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12F60:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F2C4 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12F6C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F538 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12F78:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0F830 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12F84:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0FA94 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12F90:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0FC98_my \n"  // --> Patched. Old value = 0xFFD0FC98.
"    MOV     R8, #0 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12FA0:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD0FDF8 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12FAC:\n"
"    LDRH    R1, [R2, #4] \n"
"    LDR     R3, =0x1DE78 \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R3, #6] \n"
"    STRH    R1, [SP, #0x1A] \n"
"    LDRH    R1, [R3, #2] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R3, [R3, #4] \n"
"    STRH    R3, [SP, #0x18] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #0xC] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    BL      sub_FFD100F0 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD12FE4:\n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #4] \n"
"    LDR     R3, =0x1DE78 \n"
"    STRH    R2, [SP, #0x14] \n"
"    LDRH    R2, [R3, #8] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    LDRH    R1, [R3, #2] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R2, [R3, #4] \n"
"    STRH    R2, [SP, #0x18] \n"
"    LDRH    R3, [R3, #6] \n"
"    STRH    R3, [SP, #0x1A] \n"
"    BL      sub_FFD10214 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD1301C:\n"
"    LDR     R3, =0x1DE78 \n"
"    LDRH    R1, [R3] \n"
"    STRH    R1, [SP, #0x14] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #6] \n"
"    STRH    R2, [SP, #0x16] \n"
"    LDRH    R2, [R3, #8] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    LDRH    R1, [R3, #4] \n"
"    STRH    R1, [SP, #0x18] \n"
"    LDRH    R3, [R3, #6] \n"
"    STRH    R3, [SP, #0x1A] \n"
"    BL      sub_FFD102D8 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD13054:\n"
"    LDR     R3, =0x1DE78 \n"
"    LDRH    R1, [R3, #6] \n"
"    STRH    R1, [SP, #0x1A] \n"
"    LDRH    R1, [R3] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R3, #2] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R3, [R3, #4] \n"
"    STRH    R3, [SP, #0x18] \n"
"    MOV     R0, R2 \n"
"    LDRH    R2, [R2, #0xC] \n"
"    STRH    R2, [SP, #0x1C] \n"
"    BL      sub_FFD10390 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD1308C:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD1043C \n"
"    B       loc_FFD130D8 \n"

"loc_FFD13098:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10A8C \n"
"    B       loc_FFD130D8 \n"

"loc_FFD130A4:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10C88 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD130B0:\n"
"    MOV     R0, R2 \n"
"    BL      sub_FFD10E44 \n"
"    B       loc_FFD130D8 \n"

"loc_FFD130BC:\n"
"    MOV     R0, R2 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFD1102C \n"
"    B       loc_FFD130D8 \n"

"loc_FFD130CC:\n"
"    MOV     R0, R2 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFD1102C \n"

"loc_FFD130D8:\n"
"    LDR     R12, [SP, #4] \n"

"loc_FFD130DC:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x7C] \n"
"    LDR     R2, [R12, #0x8C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x88] \n"

"loc_FFD130F0:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FFD13118 \n"
"    LDR     R1, [SP, #4] \n"
"    LDR     R3, [R1, #0x7C] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#2 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #8 \n"
"    BL      sub_FFD0ED9C \n"
"    B       loc_FFD13194 \n"

"loc_FFD13118:\n"
"    LDR     R3, [SP, #4] \n"
"    LDR     R2, [R3] \n"
"    CMP     R2, #9 \n"
"    BNE     loc_FFD13160 \n"
"    MOV     R4, #0 \n"
"    MOV     R1, #1 \n"
"    MOV     R2, R1 \n"
"    MOV     R3, R1 \n"
"    MOV     R0, R4 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0ECF0 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, R4 \n"
"    MOV     R2, R1 \n"
"    MOV     R3, R1 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0EE78 \n"
"    B       loc_FFD13194 \n"

"loc_FFD13160:\n"
"    MOV     R4, #1 \n"
"    MOV     R0, R4 \n"
"    MOV     R1, R4 \n"
"    MOV     R2, R4 \n"
"    MOV     R3, R4 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0ECF0 \n"
"    MOV     R0, R4 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    MOV     R3, R0 \n"
"    STR     R4, [SP] \n"
"    BL      sub_FFD0EE78 \n"

"loc_FFD13194:\n"
"    LDR     R0, [SP, #4] \n"
"    BL      sub_FFD0E834 \n"

"loc_FFD1319C:\n"
"    LDR     R3, =0x1DE6C \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FFE8234C /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP, #4] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x23 \n"
"    BNE     loc_FFD12CA8 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FFD0E834 \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFE81C34 /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x20 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FFD0FC98_my @ 0xFFD0FC98 - 0xFFD0FDE0, length=83
void __attribute__((naked,noinline)) sub_FFD0FC98_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0x3E \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FFE81DD0 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFD0E964 \n"
"    MOV     R6, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFD0EA30 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FFD0EACC \n"
"    LDRSH   R0, [R4, #0xA] \n"
"    BL      sub_FFD0EB68 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    BL      sub_FFD0EC04 \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOV     R5, R0 \n"
"    MOVEQ   R5, #0 \n"
"    MOVEQ   R6, R5 \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFD0FD1C \n"
"    MOV     R2, #2 \n"
"    LDRSH   R0, [R4, #4] \n"
"    LDR     R1, =0xFFD0E884 \n"
"    BL      sub_FFE494DC \n"
"    LDR     R2, =0x1DEA8 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FFD0FD20 \n"

"loc_FFD0FD1C:\n"
"    BL      sub_FFD0ECA0 \n"

"loc_FFD0FD20:\n"
"    STRH    R0, [R4, #4] \n"
"    CMP     R5, #1 \n"
"    BNE     loc_FFD0FD40 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    LDR     R1, =0xFFD0E948 \n"
"    MOV     R2, #0x20 \n"
"    BL      sub_FFD0EFC4 \n"
"    B       loc_FFD0FD44 \n"

"loc_FFD0FD40:\n"
"    BL      sub_FFD0ECE0 \n"

"loc_FFD0FD44:\n"
"    STRH    R0, [R4, #0xC] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFCDCA94_my \n"  // --> Patched. Old value = 0xFFCDCA94.
"    LDRSH   R0, [R4, #8] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFCDED48 \n"
"    ADD     R0, R4, #8 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFCDEE08 \n"
"    LDRSH   R0, [R4, #0xE] \n"
"    BL      sub_FFCFD61C \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFD0FDA8 \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R2, #0xBB0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, #2 \n"
"    ADD     R2, R2, #8 \n"
"    BL      sub_FFE81C24 /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFD0FDA8 \n"
"    MOV     R1, #0x460 \n"
"    LDR     R0, =0xFFD0E7E0 /*'ExpDrv.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FFD0FDA8:\n"
"    CMP     R5, #1 \n"
"    LDMNEFD SP!, {R4-R6,PC} \n"
"    LDR     R3, =0x1DE68 \n"
"    MOV     R2, #0xBB0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, #0x20 \n"
"    ADD     R2, R2, #8 \n"
"    BL      sub_FFE81C24 /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    LDMEQFD SP!, {R4-R6,PC} \n"
"    MOV     R1, #0x460 \n"
"    LDR     R0, =0xFFD0E7E0 /*'ExpDrv.c'*/ \n"
"    ADD     R1, R1, #7 \n"
"    LDMFD   SP!, {R4-R6,LR} \n"
"    B       _DebugAssert \n"
);
}

/*************************************************************/
//** sub_FFCDCA94_my @ 0xFFCDCA94 - 0xFFCDCAF0, length=24
void __attribute__((naked,noinline)) sub_FFCDCA94_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x593C \n"
"    LDR     R2, [R3] \n"
"    MOV     R1, #0x168 \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    ADD     R1, R1, #3 \n"
"    LDR     R0, =0xFFCDC2B0 /*'Shutter.c'*/ \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FFCDCAC0 \n"
"    BL      _DebugAssert \n"

"loc_FFCDCAC0:\n"
"    MOV     R1, #0x170 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x11A7E \n"
"    LDR     R0, =0xFFCDC2B0 /*'Shutter.c'*/ \n"
"    ADD     R1, R1, #1 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x11A7E \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FFCDCAEC \n"
"    BL      _DebugAssert \n"

"loc_FFCDCAEC:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFFCDCAF4 \n"  // Continue in firmware
);
}
