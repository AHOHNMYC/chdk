/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define NR_ON (1)
#define NR_OFF (0)

static long *nrflag = (long*)0x5724;

#include "../../../generic/capt_seq.c"


/*************************************************************/
//** capt_seq_task @ 0xFF96C9F0 - 0xFF96CBE0, length=125
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    SUB     SP, SP, #4 \n"
"    MOV     R4, SP \n"
"    B       loc_FF96CBB0 \n"

"loc_FF96CA00:\n"
"    LDR     R0, [SP] \n"
"    LDR     R3, [R0] \n"
"    CMP     R3, #0x11 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF96CB98 \n"
"    .long   loc_FF96CA5C \n"
"    .long   loc_FF96CA6C \n"
"    .long   loc_FF96CA80 \n"
"    .long   loc_FF96CA90 \n"
"    .long   loc_FF96CAA0 \n"
"    .long   loc_FF96CAB0 \n"
"    .long   loc_FF96CAC4 \n"
"    .long   loc_FF96CAD4 \n"
"    .long   loc_FF96CAE8 \n"
"    .long   loc_FF96CAF8 \n"
"    .long   loc_FF96CB08 \n"
"    .long   loc_FF96CB18 \n"
"    .long   loc_FF96CB28 \n"
"    .long   loc_FF96CB3C \n"
"    .long   loc_FF96CB4C \n"
"    .long   loc_FF96CB5C \n"
"    .long   loc_FF96CB6C \n"
"    .long   loc_FF96CB80 \n"

"loc_FF96CA5C:\n"
"    BL      sub_FF96D224 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #8 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CA6C:\n"
"    BL      sub_FF96D9A8 \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FF96A964 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x10 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CA80:\n"
"    BL      sub_FF96C034_my \n"  // --> Patched. Old value = 0xFF96C034.
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #2 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CA90:\n"
"    BL      sub_FF96DFB8 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #1 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CAA0:\n"
"    BL      sub_FF96DA58 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x20 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CAB0:\n"
"    BL      sub_FF96DB50 \n"
"    BL      sub_FF96A964 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x40 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CAC4:\n"
"    BL      sub_FF96C218 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x80 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CAD4:\n"
"    BL      sub_FF96DCC8 \n"
"    BL      sub_FF96A964 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x400 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CAE8:\n"
"    BL      sub_FF96DA58 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x800 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CAF8:\n"
"    BL      sub_FF96E7F4 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x8000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB08:\n"
"    BL      sub_FF96EBD0 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x10000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB18:\n"
"    BL      sub_FF96EAEC \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x20000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB28:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FF96EC88 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x40000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB3C:\n"
"    BL      sub_FF96EF94 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x80000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB4C:\n"
"    BL      sub_FF96F00C \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x100000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB5C:\n"
"    BL      sub_FF96F058 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x200000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB6C:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FF96EC88 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x400000 \n"
"    B       loc_FF96CB8C \n"

"loc_FF96CB80:\n"
"    BL      sub_FF96F0C0 \n"
"    LDR     R3, =0x5D0FC \n"
"    MOV     R1, #0x800000 \n"

"loc_FF96CB8C:\n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF82072C /*_SetEventFlag*/ \n"
"    B       loc_FF96CBA8 \n"

"loc_FF96CB98:\n"
"    MOV     R1, #0x374 \n"
"    LDR     R0, =0xFF96BCE4 /*'CaptSeq.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    BL      _DebugAssert \n"

"loc_FF96CBA8:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF96BD64 \n"

"loc_FF96CBB0:\n"
"    LDR     R3, =0x5D100 \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [R3] \n"
"    MOV     R2, #0 \n"
"    BL      sub_FF820F34 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FF96CA00 \n"
"    LDR     R0, =0xFF96BCE4 /*'CaptSeq.c'*/ \n"
"    MOV     R1, #0x2EC \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #4 \n"
"    LDMFD   SP!, {R4,PC} \n"
);
}

/*************************************************************/
//** sub_FF96C034_my @ 0xFF96C034 - 0xFF96C0EC, length=47
void __attribute__((naked,noinline)) sub_FF96C034_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R5, [R0, #8] \n"
"    BL      sub_FF97AE20 \n"
"    CMP     R0, #0 \n"
"    LDR     R0, =0xFF96C010 /*'StrbCtrl::ChargeIsNotCompleted.\r\n'*/ \n"
"    BNE     loc_FF96C054 \n"
"    BL      sub_FFAF21BC \n"
"    BL      sub_FF97AE2C \n"

"loc_FF96C054:\n"
"    BL      sub_FF96A094 \n"
"    ADD     R3, R5, R5, LSL#1 \n"
"    RSB     R3, R5, R3, LSL#3 \n"
"    MOV     R6, R3, LSL#2 \n"
"    ADD     R0, R6, R0 \n"
"    LDR     R3, [R0, #8] \n"
"    CMP     R3, #0 \n"
"    BEQ     loc_FF96C078 \n"
"    BL      sub_FF953B70 \n"

"loc_FF96C078:\n"
"    MOV     R0, R5 \n"
"    BL      sub_FF96E054 \n"
"    TST     R0, #1 \n"
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BEQ     loc_FF96C098 \n"
"    LDMFD   SP!, {R4-R6,LR} \n"
"    B       sub_FF96ADF4 \n"

"loc_FF96C098:\n"
"    BL      sub_FF96A094 \n"
"    MOV     R4, R0 \n"
"    BL      sub_FF825F00 \n"
"    ADD     R4, R6, R4 \n"
"    STR     R0, [R4, #4] \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF96FEEC \n"
"    BL      sub_FF96E6B0 \n"
"    BL      sub_FF96E61C \n"
"    MOV     R0, R5 \n"
"    BL      sub_FF96F5A8_my \n"  // --> Patched. Old value = 0xFF96F5A8.
"    BL      capt_seq_hook_raw_here\n"   // +
"    MOV     R2, R5 \n"
"    MOV     R1, #1 \n"
"    BL      sub_FF96ADF4 \n"
"    BL      sub_FF96F86C \n"
"    BL      sub_FF96A094 \n"
"    ADD     R0, R6, R0 \n"
"    LDR     R3, [R0, #8] \n"
"    CMP     R3, #0 \n"
"    LDMEQFD SP!, {R4-R6,PC} \n"
"    LDMFD   SP!, {R4-R6,LR} \n"
"    B       sub_FF953BAC \n"
);
}

/*************************************************************/
//** sub_FF96F5A8_my @ 0xFF96F5A8 - 0xFF96F5EC, length=18
void __attribute__((naked,noinline)) sub_FF96F5A8_my() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    LDR     R3, =0x571C \n"
"    SUB     SP, SP, #4 \n"
"    LDR     R2, [R3] \n"
"    LDR     R4, =0x5720 \n"
"    CMP     R2, #0 \n"
"    STR     R0, [R4] \n"
"    MOV     R8, #0 \n"
"    LDR     R6, =0xFF96F4E0 \n"
"    BNE     loc_FF96F5DC \n"
"    LDR     R0, =0xFF96F59C /*'MainCapt.c'*/ \n"
"    MOV     R1, #0xDB \n"
"    BL      _DebugAssert \n"

"loc_FF96F5DC:\n"
"    LDR     R3, =0x5D164 \n"
"    MVN     R1, #0 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF8208C8 /*_ClearEventFlag*/ \n"
"    BL      sub_FF96F518 \n"
"    BL      wait_until_remote_button_is_released\n"
"    BL      capt_seq_hook_set_nr\n"
"    LDR     PC, =0xFF96F5F0 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFF90B2B0 - 0xFF90B5E0, length=205
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x14 \n"
"    MOV     R7, SP \n"
"    B       loc_FF90B59C \n"

"loc_FF90B2C0:\n"
"    CMP     R2, #0x18 \n"
"    BNE     loc_FF90B2D8 \n"
"    LDR     R0, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF90B308 \n"

"loc_FF90B2D8:\n"
"    CMP     R2, #0x16 \n"
"    BNE     loc_FF90B2E8 \n"
"    BL      sub_FFA95704 \n"
"    B       loc_FF90B2F8 \n"

"loc_FF90B2E8:\n"
"    CMP     R2, #0x17 \n"
"    BNE     loc_FF90B314 \n"
"    BL      sub_FF8BB048 \n"
"    BL      sub_FF8BCEE8 \n"

"loc_FF90B2F8:\n"
"    LDR     R3, [SP] \n"
"    LDR     R0, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"

"loc_FF90B308:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF909664 \n"
"    B       loc_FF90B59C \n"

"loc_FF90B314:\n"
"    CMP     R2, #0xC \n"
"    MOV     R8, #1 \n"
"    BNE     loc_FF90B384 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF90A8D8 \n"
"    LDR     R3, [SP] \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    ADD     R0, R3, #4 \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF90AA5C \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x3C] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x38] \n"
"    B       loc_FF90B54C \n"

"loc_FF90B384:\n"
"    SUB     R3, R2, #0xD \n"
"    CMP     R3, #1 \n"
"    BHI     loc_FF90B404 \n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R5, SP, #4 \n"
"    MOV     R0, R12 \n"
"    MOV     R1, R6 \n"
"    MOV     R2, R5 \n"
"    BL      sub_FF90AAD8 \n"
"    MOV     R4, R0 \n"
"    CMP     R4, #3 \n"
"    CMPNE   R4, #1 \n"
"    BNE     loc_FF90B3E4 \n"
"    LDR     R12, [SP] \n"
"    MOV     R0, R5 \n"
"    LDR     R1, [R12, #0x24] \n"
"    MOV     R2, R4 \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    MOV     R1, R4 \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF90B290 \n"
"    B       loc_FF90B54C \n"

"loc_FF90B3E4:\n"
"    LDR     R12, [SP] \n"
"    MOV     R2, R4 \n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R3, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"
"    B       loc_FF90B54C \n"

"loc_FF90B404:\n"
"    CMP     R2, #0x14 \n"
"    BNE     loc_FF90B458 \n"
"    LDR     R1, [R12, #0x24] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R12, R1, LSL#1 \n"
"    ADD     R6, SP, #0xC \n"
"    SUB     R1, R1, #2 \n"
"    MOV     R2, #6 \n"
"    MOV     R0, R6 \n"
"    BL      _memcpy \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF90A3B0 \n"
"    LDR     R3, [SP] \n"
"    ADD     R0, R3, #4 \n"
"    LDR     R1, [R3, #0x24] \n"
"    LDR     R2, [R3, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R3, #0x30] \n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF90A608 \n"
"    B       loc_FF90B54C \n"

"loc_FF90B458:\n"
"    ADD     R6, SP, #0xC \n"
"    ADD     R1, R12, #4 \n"
"    MOV     R0, R6 \n"
"    MOV     R2, #6 \n"
"    BL      _memcpy \n"
"    LDR     R12, [SP] \n"
"    LDR     R3, [R12] \n"
"    MOV     R0, R12 \n"
"    CMP     R3, #0x15 \n"
"    LDRLS   PC, [PC, R3, LSL#2] \n"
"    B       loc_FF90B538 \n"
"    .long   loc_FF90B4DC \n"
"    .long   loc_FF90B4E4 \n"
"    .long   loc_FF90B4EC \n"
"    .long   loc_FF90B4EC \n"
"    .long   loc_FF90B4DC \n"
"    .long   loc_FF90B4E4 \n"
"    .long   loc_FF90B4EC \n"
"    .long   loc_FF90B4EC \n"
"    .long   loc_FF90B504 \n"
"    .long   loc_FF90B504 \n"
"    .long   loc_FF90B528 \n"
"    .long   loc_FF90B530 \n"
"    .long   loc_FF90B538 \n"
"    .long   loc_FF90B538 \n"
"    .long   loc_FF90B538 \n"
"    .long   loc_FF90B4F4 \n"
"    .long   loc_FF90B4FC \n"
"    .long   loc_FF90B510 \n"
"    .long   loc_FF90B518 \n"
"    .long   loc_FF90B518 \n"
"    .long   loc_FF90B538 \n"
"    .long   loc_FF90B520 \n"

"loc_FF90B4DC:\n"
"    BL      sub_FF909B20 \n"
"    B       loc_FF90B534 \n"

"loc_FF90B4E4:\n"
"    BL      sub_FF909C5C \n"
"    B       loc_FF90B534 \n"

"loc_FF90B4EC:\n"
"    BL      sub_FF909D8C \n"
"    B       loc_FF90B534 \n"

"loc_FF90B4F4:\n"
"    BL      sub_FF909F60 \n"
"    B       loc_FF90B534 \n"

"loc_FF90B4FC:\n"
"    BL      sub_FF90A024 \n"
"    B       loc_FF90B534 \n"

"loc_FF90B504:\n"
"    BL      sub_FF90A0E8_my \n"  // --> Patched. Old value = 0xFF90A0E8.
"    MOV     R8, #0 \n"
"    B       loc_FF90B534 \n"

"loc_FF90B510:\n"
"    BL      sub_FF90A1AC \n"
"    B       loc_FF90B534 \n"

"loc_FF90B518:\n"
"    BL      sub_FF90A294 \n"
"    B       loc_FF90B534 \n"

"loc_FF90B520:\n"
"    BL      sub_FF90A698 \n"
"    B       loc_FF90B534 \n"

"loc_FF90B528:\n"
"    BL      sub_FF90A76C \n"
"    B       loc_FF90B534 \n"

"loc_FF90B530:\n"
"    BL      sub_FF90A858 \n"

"loc_FF90B534:\n"
"    LDR     R12, [SP] \n"

"loc_FF90B538:\n"
"    ADD     R0, R12, #4 \n"
"    LDR     R1, [R12, #0x24] \n"
"    LDR     R2, [R12, #0x34] \n"
"    MOV     LR, PC \n"
"    LDR     PC, [R12, #0x30] \n"

"loc_FF90B54C:\n"
"    CMP     R8, #1 \n"
"    BNE     loc_FF90B574 \n"
"    LDR     R1, [SP] \n"
"    LDR     R3, [R1, #0x24] \n"
"    ADD     R3, R3, R3, LSL#1 \n"
"    ADD     R1, R1, R3, LSL#1 \n"
"    MOV     R0, R6 \n"
"    SUB     R1, R1, #2 \n"
"    BL      sub_FF9099DC \n"
"    B       loc_FF90B594 \n"

"loc_FF90B574:\n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF909980 \n"
"    MOV     R0, #1 \n"
"    MOV     R1, R0 \n"
"    MOV     R2, R0 \n"
"    BL      sub_FF909A98 \n"

"loc_FF90B594:\n"
"    LDR     R0, [SP] \n"
"    BL      sub_FF909664 \n"

"loc_FF90B59C:\n"
"    LDR     R3, =0x38A90 \n"
"    MOV     R2, #0 \n"
"    LDR     R0, [R3] \n"
"    MOV     R1, R7 \n"
"    BL      sub_FF820F34 /*_ReceiveMessageQueue*/ \n"
"    LDR     R12, [SP] \n"
"    LDR     R2, [R12] \n"
"    CMP     R2, #0x19 \n"
"    BNE     loc_FF90B2C0 \n"
"    MOV     R0, R12 \n"
"    BL      sub_FF909664 \n"
"    LDR     R3, =0x38A8C \n"
"    MOV     R1, #1 \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF82072C /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x14 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"
);
}

/*************************************************************/
//** sub_FF90A0E8_my @ 0xFF90A0E8 - 0xFF90A19C, length=46
void __attribute__((naked,noinline)) sub_FF90A0E8_my() {
asm volatile (
"    STMFD   SP!, {R4,R5,LR} \n"
"    LDR     R3, =0x38A8C \n"
"    MOV     R4, R0 \n"
"    MOV     R1, #0xE \n"
"    LDR     R0, [R3] \n"
"    BL      sub_FF8208C8 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FF9096E8 \n"
"    MOV     R5, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF909818 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FF9098B4 \n"
"    LDR     R3, [R4] \n"
"    CMP     R3, #9 \n"
"    MOVEQ   R5, #0 \n"
"    CMP     R5, #1 \n"
"    LDR     R1, =0xFF909694 \n"
"    MOV     R2, #2 \n"
"    BNE     loc_FF90A154 \n"
"    LDRSH   R0, [R4, #4] \n"
"    BL      sub_FFA94D20 \n"
"    LDR     R2, =0x38AB8 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [R2] \n"
"    B       loc_FF90A158 \n"

"loc_FF90A154:\n"
"    BL      sub_FF909950 \n"

"loc_FF90A158:\n"
"    STRH    R0, [R4, #4] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FF8BACE0_my \n"  // --> Patched. Old value = 0xFF8BACE0.
"    BL      sub_FF8BCC8C \n"
"    MOV     R1, R0 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FF8BCAA8 \n"
"    MOV     R1, #0 \n"
"    ADD     R0, R4, #8 \n"
"    BL      sub_FF8BCB6C \n"
"    CMP     R5, #1 \n"
"    MOV     R1, #2 \n"
"    MOV     R2, #0 \n"
"    LDMNEFD SP!, {R4,R5,PC} \n"
"    LDR     R3, =0x38A8C \n"
"    LDR     R0, [R3] \n"
"    LDMFD   SP!, {R4,R5,LR} \n"
"    B       sub_FF82071C /*_WaitForAllEventFlag*/ \n"
);
}

/*************************************************************/
//** sub_FF8BACE0_my @ 0xFF8BACE0 - 0xFF8BAD38, length=23
void __attribute__((naked,noinline)) sub_FF8BACE0_my() {
asm volatile (
"    STMFD   SP!, {R4,LR} \n"
"    LDR     R3, =0x3968 \n"
"    LDR     R2, [R3] \n"
"    MOV     R3, R0, LSL#16 \n"
"    CMP     R2, #1 \n"
"    MOV     R1, #0x110 \n"
"    LDR     R0, =0xFF8BA67C /*'Shutter.c'*/ \n"
"    MOV     R4, R3, ASR#16 \n"
"    BEQ     loc_FF8BAD08 \n"
"    BL      _DebugAssert \n"

"loc_FF8BAD08:\n"
"    MOV     R1, #0x114 \n"
"    CMN     R4, #0xC00 \n"
"    LDR     R3, =0x2EE6E \n"
"    LDR     R0, =0xFF8BA67C /*'Shutter.c'*/ \n"
"    ADD     R1, R1, #2 \n"
"    LDREQSH R4, [R3] \n"
"    LDRNE   R3, =0x2EE6E \n"
"    CMN     R4, #0xC00 \n"
"    STRH    R4, [R3] \n"
"    BNE     loc_FF8BAD34 \n"
"    BL      _DebugAssert \n"

"loc_FF8BAD34:\n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    LDR     PC, =0xFF8BAD3C \n"  // Continue in firmware
);
}
