/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFFC4B22C - 0xFFC4B468, length=144
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R3-R7,LR} \n"
"    LDR     R6, =0x5190 \n"

"loc_FFC4B234:\n"
"    LDR     R0, [R6, #8] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, SP \n"
"    BL      sub_FFC1693C /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC4B260 \n"
"    LDR     R1, =0x539 \n"
"    LDR     R0, =0xFFC4AE40 /*'SsShootTask.c'*/ \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    LDMFD   SP!, {R3-R7,PC} \n"

"loc_FFC4B260:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x1D \n"
"    ADDLS   PC, PC, R1, LSL#2 \n"
"    B       loc_FFC4B42C \n"
"    B       loc_FFC4B2EC \n"
"    B       loc_FFC4B2F4 \n"
"    B       loc_FFC4B2FC \n"
"    B       loc_FFC4B310 \n"
"    B       loc_FFC4B308 \n"
"    B       loc_FFC4B318 \n"
"    B       loc_FFC4B320 \n"
"    B       loc_FFC4B32C \n"
"    B       loc_FFC4B384 \n"
"    B       loc_FFC4B310 \n"
"    B       loc_FFC4B38C \n"
"    B       loc_FFC4B39C \n"
"    B       loc_FFC4B3A4 \n"
"    B       loc_FFC4B3AC \n"
"    B       loc_FFC4B3B4 \n"
"    B       loc_FFC4B3BC \n"
"    B       loc_FFC4B3C4 \n"
"    B       loc_FFC4B3CC \n"
"    B       loc_FFC4B3D8 \n"
"    B       loc_FFC4B3E0 \n"
"    B       loc_FFC4B3E8 \n"
"    B       loc_FFC4B3F0 \n"
"    B       loc_FFC4B3F8 \n"
"    B       loc_FFC4B404 \n"
"    B       loc_FFC4B40C \n"
"    B       loc_FFC4B414 \n"
"    B       loc_FFC4B41C \n"
"    B       loc_FFC4B424 \n"
"    B       loc_FFC4B438 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B2EC:\n"
"    BL      sub_FFC4BAB8 \n"
"    BL      shooting_expo_param_override\n"    // +
"    B       loc_FFC4B324 \n"

"loc_FFC4B2F4:\n"
"    BL      sub_FFC4B554_my \n"  // --> Patched. Old value = 0xFFC4B554.
"    B       loc_FFC4B438 \n"

"loc_FFC4B2FC:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FFC4BC54 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B308:\n"
"    BL      sub_FFC4B738 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B310:\n"
"    BL      sub_FFC4BA98 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B318:\n"
"    BL      sub_FFC4BAA0 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B320:\n"
"    BL      sub_FFC4BB74 \n"

"loc_FFC4B324:\n"
"    BL      sub_FFC4959C \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B32C:\n"
"    LDR     R4, [R0, #0xC] \n"
"    BL      sub_FFC4BAA8 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0B3CC \n"
"    TST     R0, #1 \n"
"    MOV     R5, R0 \n"
"    BNE     loc_FFC4B36C \n"
"    BL      sub_FFC5965C \n"
"    STR     R0, [R4, #0x18] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0C1BC \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0C670 \n"
"    MOV     R5, R0 \n"
"    LDR     R0, [R4, #0x18] \n"
"    BL      sub_FFC59870 \n"

"loc_FFC4B36C:\n"
"    BL      sub_FFC4BA98 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #9 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FFC49978 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B384:\n"
"    BL      sub_FFC4BBD4 \n"
"    B       loc_FFC4B324 \n"

"loc_FFC4B38C:\n"
"    LDR     R0, =0x18C90 \n"
"    LDR     R0, [R0, #0x4C] \n"
"    BL      sub_FFC4BF6C \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B39C:\n"
"    BL      sub_FFC4C214 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3A4:\n"
"    BL      sub_FFC4C2A0 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3AC:\n"
"    BL      sub_FFD0B5F0 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3B4:\n"
"    BL      sub_FFD0B7D8 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3BC:\n"
"    BL      sub_FFD0B868 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3C4:\n"
"    BL      sub_FFD0B910 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3CC:\n"
"    MOV     R0, #0 \n"
"    BL      sub_FFD0BAB4 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3D8:\n"
"    BL      sub_FFD0BBF4 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3E0:\n"
"    BL      sub_FFD0BC88 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3E8:\n"
"    BL      sub_FFD0BD4C \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3F0:\n"
"    BL      sub_FFC4BDBC \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B3F8:\n"
"    BL      sub_FFC4BDE8 \n"
"    BL      sub_FFC1416C \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B404:\n"
"    BL      sub_FFD0B9CC \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B40C:\n"
"    BL      sub_FFD0BA10 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B414:\n"
"    BL      sub_FFC4D74C \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B41C:\n"
"    BL      sub_FFC4D768 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B424:\n"
"    BL      sub_FFC4D778 \n"
"    B       loc_FFC4B438 \n"

"loc_FFC4B42C:\n"
"    LDR     R1, =0x65E \n"
"    LDR     R0, =0xFFC4AE40 /*'SsShootTask.c'*/ \n"
"    BL      _DebugAssert \n"

"loc_FFC4B438:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0, #4] \n"
"    LDR     R0, [R6, #4] \n"
"    BL      sub_FFC166AC /*_SetEventFlag*/ \n"
"    LDR     R4, [SP] \n"
"    LDR     R0, [R4, #8] \n"
"    CMP     R0, #0 \n"
"    LDREQ   R1, =0x11D \n"
"    LDREQ   R0, =0xFFC4AE40 /*'SsShootTask.c'*/ \n"
"    BLEQ    _DebugAssert \n"
"    MOV     R0, #0 \n"
"    STR     R0, [R4, #8] \n"
"    B       loc_FFC4B234 \n"
);
}

/*************************************************************/
//** sub_FFC4B554_my @ 0xFFC4B554 - 0xFFC4B634, length=57
void __attribute__((naked,noinline)) sub_FFC4B554_my() {
asm volatile (
"    STMFD   SP!, {R3-R5,LR} \n"
"    LDR     R4, [R0, #0xC] \n"
"    LDR     R0, [R4, #8] \n"
"    ORR     R0, R0, #1 \n"
"    STR     R0, [R4, #8] \n"
"    MOV     R0, #2 \n"
"    BL      sub_FFC462C8 \n"
"    BL      sub_FFC4BAA8 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFC4BD70 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0B054 \n"
"    CMP     R0, #0 \n"
"    MOV     R0, R4 \n"
"    BEQ     loc_FFC4B5AC \n"
"    BL      sub_FFD0B0F0 \n"
"    TST     R0, #1 \n"
"    MOVNE   R2, R4 \n"
"    LDMNEFD SP!, {R3-R5,LR} \n"
"    MOVNE   R1, #1 \n"
"    BNE     sub_FFC49978 \n"
"    B       loc_FFC4B5B0 \n"

"loc_FFC4B5AC:\n"
"    BL      sub_FFD0B0A4 \n"

"loc_FFC4B5B0:\n"
"    MOV     R0, #0 \n"
"    STR     R0, [SP] \n"
"    LDR     R0, =0x18C90 \n"
"    MOV     R2, #2 \n"
"    LDRH    R0, [R0, #0x8A] \n"
"    MOV     R1, SP \n"
"    CMP     R0, #3 \n"
"    LDRNE   R0, [R4, #0xC] \n"
"    CMPNE   R0, #1 \n"
"    MOVHI   R0, #1 \n"
"    STRHI   R0, [SP] \n"
"    LDR     R0, =0x123 \n"
"    BL      _SetPropertyCase \n"
"    BL      sub_FFD2D9BC \n"
"    BL      sub_FFC5965C \n"
"    STR     R0, [R4, #0x18] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0C1BC \n"
"    BL      sub_FFD0CD0C \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0C284_my \n"  // --> Patched. Old value = 0xFFD0C284.
"    MOV     R5, R0 \n"
"    BL      capt_seq_hook_raw_here\n"               // added
"    BL      sub_FFC4D768 \n"
"    BL      sub_FFC4D7A4 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FFC49978 \n"
"    BL      sub_FFD0C600 \n"
"    CMP     R0, #0 \n"
"    LDRNE   R0, [R4, #8] \n"
"    ORRNE   R0, R0, #0x2000 \n"
"    STRNE   R0, [R4, #8] \n"
"    LDMFD   SP!, {R3-R5,PC} \n"
);
}

/*************************************************************/
//** sub_FFD0C284_my @ 0xFFD0C284 - 0xFFD0C2EC, length=27
void __attribute__((naked,noinline)) sub_FFD0C284_my() {
asm volatile (
"    STMFD   SP!, {R1-R9,LR} \n"
"    MOV     R4, R0 \n"
"    BL      sub_FFD0CE6C \n"
"    MVN     R1, #0 \n"
"    BL      sub_FFC166E0 /*_ClearEventFlag*/ \n"
"    MOV     R2, #4 \n"
"    ADD     R1, SP, #4 \n"
"    MOV     R0, #0x8A \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    MOVNE   R1, #0x35C \n"
"    LDRNE   R0, =0xFFD0C3FC /*'SsCaptureSeq.c'*/ \n"
"    BLNE    _DebugAssert \n"
"    LDR     R7, =0x18D48 \n"
"    LDR     R6, =0x18C90 \n"
"    LDRSH   R1, [R7, #0xE] \n"
"    LDR     R0, [R6, #0x80] \n"
"    BL      sub_FFDC18E0 \n"
"    BL      _GetCCDTemperature \n"
"    LDR     R3, =0x8598 \n"
"    STRH    R0, [R4, #0x94] \n"
"    STR     R3, [SP] \n"
"    MOV     R1, R0 \n"
"    LDRH    R0, [R6, #0x54] \n"
"    LDRSH   R2, [R7, #0xC] \n"
"    SUB     R3, R3, #4 \n"
"    BL      sub_FFD0D464 \n"
"    BL      wait_until_remote_button_is_released\n" // added
"    BL      capt_seq_hook_set_nr\n"                 // added
"    LDR     PC, =0xFFD0C2F0 \n"  // Continue in firmware
);
}

/*************************************************************/
//** exp_drv_task @ 0xFFC84248 - 0xFFC84840, length=383
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x20 \n"
"    LDR     R8, =0xBB8 \n"
"    LDR     R7, =0x6258 \n"
"    LDR     R5, =0x1DBD8 \n"
"    MOV     R0, #0 \n"
"    ADD     R6, SP, #0x10 \n"
"    STR     R0, [SP, #0xC] \n"

"loc_FFC84268:\n"
"    LDR     R0, [R7, #0x20] \n"
"    MOV     R2, #0 \n"
"    ADD     R1, SP, #0x1C \n"
"    BL      sub_FFC1693C /*_ReceiveMessageQueue*/ \n"
"    LDR     R0, [SP, #0xC] \n"
"    CMP     R0, #1 \n"
"    BNE     loc_FFC842B0 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #0x13 \n"
"    CMPNE   R0, #0x14 \n"
"    CMPNE   R0, #0x15 \n"
"    BEQ     loc_FFC843CC \n"
"    CMP     R0, #0x27 \n"
"    BEQ     loc_FFC843A4 \n"
"    ADD     R1, SP, #0xC \n"
"    MOV     R0, #0 \n"
"    BL      sub_FFC841F8 \n"

"loc_FFC842B0:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x2C \n"
"    BNE     loc_FFC842E0 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC854B4 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFC166AC /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x20 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"

"loc_FFC842E0:\n"
"    CMP     R1, #0x2B \n"
"    BNE     loc_FFC842FC \n"
"    LDR     R2, [R0, #0x88]! \n"
"    LDR     R1, [R0, #4] \n"
"    MOV     R0, R1 \n"
"    BLX     R2 \n"
"    B       loc_FFC84838 \n"

"loc_FFC842FC:\n"
"    CMP     R1, #0x25 \n"
"    BNE     loc_FFC8434C \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFC166E0 /*_ClearEventFlag*/ \n"
"    LDR     R0, =0xFFC80D04 \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFD002E8 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFC165EC /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    LDRNE   R1, =0xD36 \n"
"    BNE     loc_FFC84390 \n"

"loc_FFC84338:\n"
"    LDR     R1, [SP, #0x1C] \n"
"    LDR     R0, [R1, #0x8C] \n"
"    LDR     R1, [R1, #0x88] \n"
"    BLX     R1 \n"
"    B       loc_FFC84838 \n"

"loc_FFC8434C:\n"
"    CMP     R1, #0x26 \n"
"    BNE     loc_FFC8439C \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC841F8 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFC166E0 /*_ClearEventFlag*/ \n"
"    LDR     R0, =0xFFC80D14 \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFD00570 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFC165EC /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC84338 \n"
"    MOV     R1, #0xD40 \n"

"loc_FFC84390:\n"
"    LDR     R0, =0xFFC81404 /*'ExpDrv.c'*/ \n"
"    BL      _DebugAssert \n"
"    B       loc_FFC84338 \n"

"loc_FFC8439C:\n"
"    CMP     R1, #0x27 \n"
"    BNE     loc_FFC843B4 \n"

"loc_FFC843A4:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC841F8 \n"
"    B       loc_FFC84338 \n"

"loc_FFC843B4:\n"
"    CMP     R1, #0x2A \n"
"    BNE     loc_FFC843CC \n"
"    BL      sub_FFC6E710 \n"
"    BL      sub_FFC6F39C \n"
"    BL      sub_FFC6EED4 \n"
"    B       loc_FFC84338 \n"

"loc_FFC843CC:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R4, #1 \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x11 \n"
"    CMPNE   R1, #0x12 \n"
"    BNE     loc_FFC8443C \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R0, R1, LSL#2 \n"
"    SUB     R1, R1, #8 \n"
"    LDMIA   R1, {R2-R4} \n"
"    STMIA   R6, {R2-R4} \n"
"    BL      sub_FFC82D84 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC8588C \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x90] \n"
"    LDR     R2, [R0, #0x94] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    B       loc_FFC84778 \n"

"loc_FFC8443C:\n"
"    CMP     R1, #0x13 \n"
"    CMPNE   R1, #0x14 \n"
"    CMPNE   R1, #0x15 \n"
"    BNE     loc_FFC844F0 \n"
"    ADD     R3, SP, #0xC \n"
"    MOV     R2, SP \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFC82FCC \n"
"    CMP     R0, #1 \n"
"    MOV     R4, R0 \n"
"    CMPNE   R4, #5 \n"
"    BNE     loc_FFC8448C \n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, R4 \n"
"    LDR     R1, [R0, #0x7C]! \n"
"    LDR     R12, [R0, #0xC]! \n"
"    LDR     R3, [R0, #4] \n"
"    MOV     R0, SP \n"
"    BLX     R12 \n"
"    B       loc_FFC844C4 \n"

"loc_FFC8448C:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    CMP     R4, #2 \n"
"    LDR     R3, [R0, #0x8C] \n"
"    CMPNE   R4, #6 \n"
"    BNE     loc_FFC844D8 \n"
"    LDR     R12, [R0, #0x88] \n"
"    MOV     R0, SP \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BLX     R12 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, SP \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFC83F44 \n"

"loc_FFC844C4:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R2, [SP, #0xC] \n"
"    MOV     R1, R4 \n"
"    BL      sub_FFC84198 \n"
"    B       loc_FFC84778 \n"

"loc_FFC844D8:\n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R12, [R0, #0x88] \n"
"    ADD     R0, R0, #4 \n"
"    MOV     R2, R4 \n"
"    BLX     R12 \n"
"    B       loc_FFC84778 \n"

"loc_FFC844F0:\n"
"    CMP     R1, #0x21 \n"
"    CMPNE   R1, #0x22 \n"
"    BNE     loc_FFC8453C \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R0, R1, LSL#2 \n"
"    SUB     R1, R1, #8 \n"
"    LDMIA   R1, {R2-R4} \n"
"    STMIA   R6, {R2-R4} \n"
"    BL      sub_FFC82310 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC82600 \n"
"    B       loc_FFC84778 \n"

"loc_FFC8453C:\n"
"    ADD     R1, R0, #4 \n"
"    LDMIA   R1, {R2,R3,R12} \n"
"    STMIA   R6, {R2,R3,R12} \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x24 \n"
"    ADDLS   PC, PC, R1, LSL#2 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC845EC \n"
"    B       loc_FFC845EC \n"
"    B       loc_FFC84640 \n"
"    B       loc_FFC84648 \n"
"    B       loc_FFC84648 \n"
"    B       loc_FFC84648 \n"
"    B       loc_FFC845EC \n"
"    B       loc_FFC84640 \n"
"    B       loc_FFC84648 \n"
"    B       loc_FFC84648 \n"
"    B       loc_FFC84660 \n"
"    B       loc_FFC84660 \n"
"    B       loc_FFC8474C \n"
"    B       loc_FFC84754 \n"
"    B       loc_FFC84754 \n"
"    B       loc_FFC84754 \n"
"    B       loc_FFC84754 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC84650 \n"
"    B       loc_FFC84658 \n"
"    B       loc_FFC84658 \n"
"    B       loc_FFC8466C \n"
"    B       loc_FFC8466C \n"
"    B       loc_FFC84674 \n"
"    B       loc_FFC846A4 \n"
"    B       loc_FFC846D4 \n"
"    B       loc_FFC84704 \n"
"    B       loc_FFC84734 \n"
"    B       loc_FFC84734 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC84758 \n"
"    B       loc_FFC8473C \n"
"    B       loc_FFC84744 \n"

"loc_FFC845EC:\n"
"    BL      sub_FFC811F0 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84640:\n"
"    BL      sub_FFC81478 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84648:\n"
"    BL      sub_FFC8167C \n"
"    B       loc_FFC84758 \n"

"loc_FFC84650:\n"
"    BL      sub_FFC818E4 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84658:\n"
"    BL      sub_FFC81AD8 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84660:\n"
"    BL      sub_FFC81D40_my \n"  // --> Patched. Old value = 0xFFC81D40.
"    MOV     R4, #0 \n"
"    B       loc_FFC84758 \n"

"loc_FFC8466C:\n"
"    BL      sub_FFC81E7C \n"
"    B       loc_FFC84758 \n"

"loc_FFC84674:\n"
"    LDRH    R1, [R0, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R0, #0xC] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC85528 \n"
"    B       loc_FFC84758 \n"

"loc_FFC846A4:\n"
"    LDRH    R1, [R0, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R5, #8] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC856A8 \n"
"    B       loc_FFC84758 \n"

"loc_FFC846D4:\n"
"    LDRH    R1, [R5] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R0, #6] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R5, #8] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC85754 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84704:\n"
"    LDRH    R1, [R5] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R0, #0xC] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC857F4 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84734:\n"
"    BL      sub_FFC820F0 \n"
"    B       loc_FFC84758 \n"

"loc_FFC8473C:\n"
"    BL      sub_FFC82704 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84744:\n"
"    BL      sub_FFC8293C \n"
"    B       loc_FFC84758 \n"

"loc_FFC8474C:\n"
"    BL      sub_FFC82AB4 \n"
"    B       loc_FFC84758 \n"

"loc_FFC84754:\n"
"    BL      sub_FFC82C4C \n"

"loc_FFC84758:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    CMP     R4, #1 \n"
"    BNE     loc_FFC847C0 \n"

"loc_FFC84778:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, #0xC \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R0, R0, R1, LSL#2 \n"
"    SUB     R4, R0, #8 \n"
"    LDR     R0, =0x1DBD8 \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFE715DC \n"
"    LDR     R0, =0x1DBE4 \n"
"    MOV     R2, #0xC \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFE715DC \n"
"    LDR     R0, =0x1DBF0 \n"
"    MOV     R2, #0xC \n"
"    MOV     R1, R4 \n"
"    BL      sub_FFE715DC \n"
"    B       loc_FFC84838 \n"

"loc_FFC847C0:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #0xB \n"
"    BNE     loc_FFC84808 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [SP] \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #0 \n"
"    BL      sub_FFC80FF8 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [SP] \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #0 \n"
"    B       loc_FFC84834 \n"

"loc_FFC84808:\n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #1 \n"
"    STR     R3, [SP] \n"
"    BL      sub_FFC80FF8 \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #1 \n"
"    STR     R3, [SP] \n"

"loc_FFC84834:\n"
"    BL      sub_FFC81138 \n"

"loc_FFC84838:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC854B4 \n"
"    B       loc_FFC84268 \n"
);
}

/*************************************************************/
//** sub_FFC81D40_my @ 0xFFC81D40 - 0xFFC81DFC, length=48
void __attribute__((naked,noinline)) sub_FFC81D40_my() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    LDR     R7, =0x6258 \n"
"    MOV     R4, R0 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x3E \n"
"    BL      sub_FFC166E0 /*_ClearEventFlag*/ \n"
"    LDRSH   R0, [R4, #4] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFC80D88 \n"
"    MOV     R6, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC80E98 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FFC80EF0 \n"
"    LDRSH   R0, [R4, #0xA] \n"
"    BL      sub_FFC80F48 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    BL      sub_FFC80FA0 \n"
"    MOV     R5, R0 \n"
"    LDR     R0, [R4] \n"
"    LDR     R8, =0x1DBF0 \n"
"    CMP     R0, #0xB \n"
"    MOVEQ   R6, #0 \n"
"    MOVEQ   R5, #0 \n"
"    BEQ     loc_FFC81DD0 \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFC81DD0 \n"
"    LDRSH   R0, [R4, #4] \n"
"    LDR     R1, =0xFFC80CF4 \n"
"    MOV     R2, #2 \n"
"    BL      sub_FFD0043C \n"
"    STRH    R0, [R4, #4] \n"
"    MOV     R0, #0 \n"
"    STR     R0, [R7, #0x28] \n"
"    B       loc_FFC81DD8 \n"

"loc_FFC81DD0:\n"
"    LDRH    R0, [R8] \n"
"    STRH    R0, [R4, #4] \n"

"loc_FFC81DD8:\n"
"    CMP     R5, #1 \n"
"    LDRNEH  R0, [R8, #8] \n"
"    BNE     loc_FFC81DF4 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    LDR     R1, =0xFFC80D78 \n"
"    MOV     R2, #0x20 \n"
"    BL      sub_FFC854E4 \n"

"loc_FFC81DF4:\n"
"    STRH    R0, [R4, #0xC] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC6E480_my \n"  // --> Patched. Old value = 0xFFC6E480.
"    LDR     PC, =0xFFC81E00 \n"  // Continue in firmware
);
}

/*************************************************************/
//** sub_FFC6E480_my @ 0xFFC6E480 - 0xFFC6E4E8, length=27
void __attribute__((naked,noinline)) sub_FFC6E480_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R5, =0x5F0C \n"
"    MOV     R4, R0 \n"
"    LDR     R0, [R5, #4] \n"
"    CMP     R0, #1 \n"
"    MOVNE   R1, #0x140 \n"
"    LDRNE   R0, =0xFFC6E284 /*'Shutter.c'*/ \n"
"    BLNE    _DebugAssert \n"
"    CMN     R4, #0xC00 \n"
"    LDREQSH R4, [R5, #2] \n"
"    CMN     R4, #0xC00 \n"
"    LDREQ   R1, =0x146 \n"
"    LDREQ   R0, =0xFFC6E284 /*'Shutter.c'*/ \n"
"    STRH    R4, [R5, #2] \n"
"    BLEQ    _DebugAssert \n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    MOV     R4, R0 \n"
//"  BL      _sub_FFC9F3D8 \n"  // --> Nullsub call removed.
"    MOV     R0, R4 \n"
"    BL      sub_FFCA3474 \n"
"    TST     R0, #1 \n"
"    LDRNE   R1, =0x14B \n"
"    LDMNEFD SP!, {R4-R6,LR} \n"
"    LDRNE   R0, =0xFFC6E284 /*'Shutter.c'*/ \n"
"    BNE     _DebugAssert \n"
"    LDMFD   SP!, {R4-R6,PC} \n"
);
}
