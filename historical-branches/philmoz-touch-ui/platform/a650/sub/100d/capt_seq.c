/*
 * capt_seq.c - auto-generated by CHDK code_gen.
 */
#include "lolevel.h"
#include "platform.h"
#include "core.h"

#define USE_STUBS_NRFLAG 1          // see stubs_entry.S

#include "../../../generic/capt_seq.c"

/*************************************************************/
//** capt_seq_task @ 0xFFC4DB88 - 0xFFC4DE00, length=159
void __attribute__((naked,noinline)) capt_seq_task() {
asm volatile (
"    STMFD   SP!, {R3-R9,LR} \n"
"    LDR     R6, =0x1CDB8 \n"
"    LDR     R5, =0x565C \n"
"    MOV     R9, #1 \n"
"    MOV     R7, #0 \n"

"loc_FFC4DB9C:\n"
"    LDR     R0, [R5, #0xC] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, SP \n"
"    BL      sub_FFC19230 /*_ReceiveMessageQueue*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC4DBC8 \n"
"    LDR     R1, =0x43F \n"
"    LDR     R0, =0xFFC4D8F8 /*'SsShootTask.c'*/ \n"
"    BL      _DebugAssert \n"
"    BL      _ExitTask \n"
"    LDMFD   SP!, {R3-R9,PC} \n"

"loc_FFC4DBC8:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x18 \n"
"    ADDLS   PC, PC, R1, LSL#2 \n"
"    B       loc_FFC4DDC4 \n"
"    B       loc_FFC4DC40 \n"
"    B       loc_FFC4DCA8 \n"
"    B       loc_FFC4DCB0 \n"
"    B       loc_FFC4DCC8 \n"
"    B       loc_FFC4DCBC \n"
"    B       loc_FFC4DCD0 \n"
"    B       loc_FFC4DCD8 \n"
"    B       loc_FFC4DCE0 \n"
"    B       loc_FFC4DD38 \n"
"    B       loc_FFC4DD44 \n"
"    B       loc_FFC4DD4C \n"
"    B       loc_FFC4DD54 \n"
"    B       loc_FFC4DD5C \n"
"    B       loc_FFC4DD64 \n"
"    B       loc_FFC4DD6C \n"
"    B       loc_FFC4DD74 \n"
"    B       loc_FFC4DD7C \n"
"    B       loc_FFC4DD84 \n"
"    B       loc_FFC4DD8C \n"
"    B       loc_FFC4DD94 \n"
"    B       loc_FFC4DD9C \n"
"    B       loc_FFC4DDA8 \n"
"    B       loc_FFC4DDB4 \n"
"    B       loc_FFC4DDBC \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DC40:\n"
"    BL      sub_FFD0D5DC \n"
"    BL      shooting_expo_param_override\n"   // +
"    BL      sub_FFC4BF50 \n"
"    MOV     R0, #0\n"                          // added
"    STR     R0, [R6,#0x24]\n"                  // added, fixes overrides behavior at short shutter press
//"  LDR     R0, [R6, #0x24] \n"
"    CMP     R0, #0 \n"
"    BEQ     loc_FFC4DDD0 \n"
//above patch makes following lines redundant - 13 instructions skipped

"loc_FFC4DC88:\n"
"    BL      sub_FFD22C14 \n"
"    BL      sub_FFC5B05C \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0EC34_my \n"  // --> Patched. Old value = 0xFFD0EC34.
"    BL      capt_seq_hook_raw_here \n"         // added
"    TST     R0, #1 \n"
"    STRNE   R9, [R5, #4] \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DCA8:\n"
"    BL      sub_FFC4DED8_my \n"  // --> Patched. Old value = 0xFFC4DED8.
"    B       loc_FFC4DCC0 \n"

"loc_FFC4DCB0:\n"
"    MOV     R0, #1 \n"
"    BL      sub_FFD0D780 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DCBC:\n"
"    BL      sub_FFD0D278 \n"

"loc_FFC4DCC0:\n"
"    STR     R7, [R6, #0x24] \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DCC8:\n"
"    BL      sub_FFD0D5A8 \n"
"    B       loc_FFC4DCC0 \n"

"loc_FFC4DCD0:\n"
"    BL      sub_FFD0D5B0 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DCD8:\n"
"    BL      sub_FFD0D6A0 \n"
"    B       loc_FFC4DD3C \n"

"loc_FFC4DCE0:\n"
"    LDR     R4, [R0, #0xC] \n"
"    BL      sub_FFD0D5B8 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0DDCC \n"
"    TST     R0, #1 \n"
"    MOV     R8, R0 \n"
"    BNE     loc_FFC4DD20 \n"
"    BL      sub_FFC5B05C \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0EB4C \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0F09C \n"
"    MOV     R8, R0 \n"
"    LDR     R0, [R4, #0x14] \n"
"    BL      sub_FFC5B270 \n"

"loc_FFC4DD20:\n"
"    BL      sub_FFD0D5A8 \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #8 \n"
"    MOV     R0, R8 \n"
"    BL      sub_FFC4C398 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD38:\n"
"    BL      sub_FFD0D6FC \n"

"loc_FFC4DD3C:\n"
"    BL      sub_FFC4BF50 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD44:\n"
"    BL      sub_FFD0D5A8 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD4C:\n"
"    BL      sub_FFD0E038 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD54:\n"
"    BL      sub_FFD0E1F0 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD5C:\n"
"    BL      sub_FFD0E280 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD64:\n"
"    BL      sub_FFD0E334 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD6C:\n"
"    BL      sub_FFD0E51C \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD74:\n"
"    BL      sub_FFD0E56C \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD7C:\n"
"    MOV     R0, #0 \n"
"    B       loc_FFC4DDA0 \n"

"loc_FFC4DD84:\n"
"    BL      sub_FFD0E730 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD8C:\n"
"    BL      sub_FFD0E7C4 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD94:\n"
"    BL      sub_FFD0E884 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DD9C:\n"
"    MOV     R0, #1 \n"

"loc_FFC4DDA0:\n"
"    BL      sub_FFD0E5F0 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DDA8:\n"
"    BL      sub_FFD0D8A4 \n"
"    BL      sub_FFC15B18 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DDB4:\n"
"    BL      sub_FFD0E3F0 \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DDBC:\n"
"    BL      sub_FFD0E45C \n"
"    B       loc_FFC4DDD0 \n"

"loc_FFC4DDC4:\n"
"    LDR     R1, =0x523 \n"
"    LDR     R0, =0xFFC4D8F8 /*'SsShootTask.c'*/ \n"
"    BL      _DebugAssert \n"

"loc_FFC4DDD0:\n"
"    LDR     R0, [SP] \n"
"    LDR     R1, [R0, #4] \n"
"    LDR     R0, [R5, #8] \n"
"    BL      sub_FFC18FAC /*_SetEventFlag*/ \n"
"    LDR     R4, [SP] \n"
"    LDR     R0, [R4, #8] \n"
"    CMP     R0, #0 \n"
"    MOVEQ   R1, #0xFC \n"
"    LDREQ   R0, =0xFFC4D8F8 /*'SsShootTask.c'*/ \n"
"    BLEQ    _DebugAssert \n"
"    STR     R7, [R4, #8] \n"
"    B       loc_FFC4DB9C \n"
"    STMFD   SP!, {R3-R5,LR} \n"
);
}

/*************************************************************/
//** sub_FFD0EC34_my @ 0xFFD0EC34 - 0xFFD0ECA4, length=29
void __attribute__((naked,noinline)) sub_FFD0EC34_my() {
asm volatile (
"    STMFD   SP!, {R0-R10,LR} \n"
"    MOV     R6, #0 \n"
"    MOV     R4, R0 \n"
"    BL      sub_FFD0F760 \n"
"    MVN     R1, #0 \n"
"    BL      sub_FFC18FE0 /*_ClearEventFlag*/ \n"
"    MOV     R2, #4 \n"
"    ADD     R1, SP, #8 \n"
"    MOV     R0, #0x8A \n"
"    BL      _GetPropertyCase \n"
"    TST     R0, #1 \n"
"    LDRNE   R1, =0x20A \n"
"    LDRNE   R0, =0xFFD0EE08 /*'SsCaptureSeq.c'*/ \n"
"    BLNE    _DebugAssert \n"
"    LDR     R8, =0x1CE6C \n"
"    LDR     R5, =0x1CDB8 \n"
"    LDRSH   R1, [R8, #0xE] \n"
"    LDR     R0, [R5, #0x7C] \n"
//"  BL      _sub_FFCD413C \n"  // --> Nullsub call removed.
"    BL      _GetCCDTemperature \n"
"    LDR     R2, =0xD788 \n"
"    ADD     R3, R4, #0x8C \n"
"    STRH    R0, [R4, #0x88] \n"
"    STRD    R2, [SP] \n"
"    MOV     R1, R0 \n"
"    LDRH    R0, [R5, #0x54] \n"
"    LDRSH   R2, [R8, #0xC] \n"
"    LDR     R3, =0xD784 \n"
"    BL      sub_FFD0FC54 \n"
"    BL      wait_until_remote_button_is_released\n" // added
"    BL      capt_seq_hook_set_nr\n"                 // added
"    LDR     PC, =0xFFD0ECA8 \n"  // Continue in firmware
);
}

/*************************************************************/
//** sub_FFC4DED8_my @ 0xFFC4DED8 - 0xFFC4DF8C, length=46
void __attribute__((naked,noinline)) sub_FFC4DED8_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R4, [R0, #0xC] \n"
"    LDR     R6, =0x1CDB8 \n"
"    LDR     R0, [R4, #8] \n"
"    MOV     R5, #0 \n"
"    ORR     R0, R0, #1 \n"
"    STR     R0, [R4, #8] \n"
"    LDR     R0, [R6, #0x24] \n"
"    CMP     R0, #0 \n"
"    MOVEQ   R0, #2 \n"
"    BLEQ    sub_FFC48FB4 \n"
"    BL      sub_FFD0D5B8 \n"
"    LDR     R0, [R6, #0x24] \n"
"    CMP     R0, #0 \n"
"    BNE     loc_FFC4DF58 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0DA4C \n"
"    TST     R0, #1 \n"
"    MOVNE   R2, R4 \n"
"    LDMNEFD SP!, {R4-R6,LR} \n"
"    MOVNE   R1, #1 \n"
"    BNE     sub_FFC4C398 \n"
"    BL      sub_FFD22C14 \n"
"    BL      sub_FFC5B05C \n"
"    STR     R0, [R4, #0x14] \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0EB4C \n"
"    BL      sub_FFD0F5F4 \n"
"    MOV     R0, R4 \n"
"    BL      sub_FFD0EC34_my \n"  // --> Patched. Old value = 0xFFD0EC34.
"    BL      capt_seq_hook_raw_here \n"         // added
"    MOV     R5, R0 \n"
"    B       loc_FFC4DF68 \n"

"loc_FFC4DF58:\n"
"    LDR     R0, =0x565C \n"
"    LDR     R0, [R0, #4] \n"
"    CMP     R0, #0 \n"
"    MOVNE   R5, #0x1D \n"

"loc_FFC4DF68:\n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, R5 \n"
"    BL      sub_FFC4C398 \n"
"    BL      sub_FFD0F03C \n"
"    CMP     R0, #0 \n"
"    LDRNE   R0, [R4, #8] \n"
"    ORRNE   R0, R0, #0x2000 \n"
"    STRNE   R0, [R4, #8] \n"
"    LDMFD   SP!, {R4-R6,PC} \n"
);
}

/*************************************************************/
//** exp_drv_task @ 0xFFC93848 - 0xFFC93E9C, length=406
void __attribute__((naked,noinline)) exp_drv_task() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    SUB     SP, SP, #0x20 \n"
"    LDR     R8, =0xBB8 \n"
"    LDR     R7, =0x68DC \n"
"    LDR     R5, =0x44594 \n"
"    MOV     R0, #0 \n"
"    ADD     R6, SP, #0x10 \n"
"    STR     R0, [SP, #0xC] \n"

"loc_FFC93868:\n"
"    LDR     R0, [R7, #0x20] \n"
"    MOV     R2, #0 \n"
"    ADD     R1, SP, #0x1C \n"
"    BL      sub_FFC19230 /*_ReceiveMessageQueue*/ \n"
"    LDR     R0, [SP, #0xC] \n"
"    CMP     R0, #1 \n"
"    BNE     loc_FFC938B0 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #0x13 \n"
"    CMPNE   R0, #0x14 \n"
"    CMPNE   R0, #0x15 \n"
"    BEQ     loc_FFC93A30 \n"
"    CMP     R0, #0x26 \n"
"    BEQ     loc_FFC9399C \n"
"    ADD     R1, SP, #0xC \n"
"    MOV     R0, #0 \n"
"    BL      sub_FFC937F8 \n"

"loc_FFC938B0:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x2B \n"
"    BNE     loc_FFC938E0 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC94B28 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #1 \n"
"    BL      sub_FFC18FAC /*_SetEventFlag*/ \n"
"    BL      _ExitTask \n"
"    ADD     SP, SP, #0x20 \n"
"    LDMFD   SP!, {R4-R8,PC} \n"

"loc_FFC938E0:\n"
"    CMP     R1, #0x2A \n"
"    BNE     loc_FFC938FC \n"
"    LDR     R2, [R0, #0x88]! \n"
"    LDR     R1, [R0, #4] \n"
"    MOV     R0, R1 \n"
"    BLX     R2 \n"
"    B       loc_FFC93E94 \n"

"loc_FFC938FC:\n"
"    CMP     R1, #0x24 \n"
"    BNE     loc_FFC9394C \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFC18FE0 /*_ClearEventFlag*/ \n"
"    LDR     R0, =0xFFC902E4 \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFD03490 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x80 \n"
"    BL      sub_FFC18EE4 /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    LDRNE   R1, =0xD07 \n"
"    BNE     loc_FFC93A0C \n"

"loc_FFC93938:\n"
"    LDR     R1, [SP, #0x1C] \n"
"    LDR     R0, [R1, #0x8C] \n"
"    LDR     R1, [R1, #0x88] \n"
"    BLX     R1 \n"
"    B       loc_FFC93E94 \n"

"loc_FFC9394C:\n"
"    CMP     R1, #0x25 \n"
"    BNE     loc_FFC93994 \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC937F8 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFC18FE0 /*_ClearEventFlag*/ \n"
"    MOV     R1, #0x100 \n"
"    LDR     R0, =0xFFC902F4 \n"
"    BL      sub_FFD03C50 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x100 \n"
"    BL      sub_FFC18EE4 /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC93938 \n"
"    LDR     R1, =0xD11 \n"
"    B       loc_FFC93A0C \n"

"loc_FFC93994:\n"
"    CMP     R1, #0x26 \n"
"    BNE     loc_FFC939AC \n"

"loc_FFC9399C:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC937F8 \n"
"    B       loc_FFC93938 \n"

"loc_FFC939AC:\n"
"    CMP     R1, #0x27 \n"
"    CMPNE   R1, #0x28 \n"
"    BNE     loc_FFC93A18 \n"
"    ADD     R1, SP, #0xC \n"
"    BL      sub_FFC937F8 \n"
"    LDR     R4, [SP, #0x1C] \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x40 \n"
"    BL      sub_FFC18FE0 /*_ClearEventFlag*/ \n"
"    LDR     R0, [R4] \n"
"    MOV     R1, #0x40 \n"
"    CMP     R0, #0x27 \n"
"    LDR     R0, =0xFFC90358 \n"
"    BNE     loc_FFC939EC \n"
"    BL      sub_FFD03530 \n"
"    B       loc_FFC939F0 \n"

"loc_FFC939EC:\n"
"    BL      sub_FFD035BC \n"

"loc_FFC939F0:\n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R2, R8 \n"
"    MOV     R1, #0x40 \n"
"    BL      sub_FFC18EE4 /*_WaitForAllEventFlag*/ \n"
"    TST     R0, #1 \n"
"    BEQ     loc_FFC93938 \n"
"    LDR     R1, =0xD1F \n"

"loc_FFC93A0C:\n"
"    LDR     R0, =0xFFC909F4 /*'ExpDrv.c'*/ \n"
"    BL      _DebugAssert \n"
"    B       loc_FFC93938 \n"

"loc_FFC93A18:\n"
"    CMP     R1, #0x29 \n"
"    BNE     loc_FFC93A30 \n"
"    BL      sub_FFC75410 \n"
"    BL      sub_FFC76190 \n"
"    BL      sub_FFC75C50 \n"
"    B       loc_FFC93938 \n"

"loc_FFC93A30:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R4, #1 \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x11 \n"
"    CMPNE   R1, #0x12 \n"
"    BNE     loc_FFC93AA0 \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R0, R1, LSL#2 \n"
"    SUB     R1, R1, #8 \n"
"    LDMIA   R1, {R2-R4} \n"
"    STMIA   R6, {R2-R4} \n"
"    BL      sub_FFC92374 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC94EFC \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x90] \n"
"    LDR     R2, [R0, #0x94] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    B       loc_FFC93DD4 \n"

"loc_FFC93AA0:\n"
"    CMP     R1, #0x13 \n"
"    CMPNE   R1, #0x14 \n"
"    CMPNE   R1, #0x15 \n"
"    BNE     loc_FFC93B54 \n"
"    ADD     R3, SP, #0xC \n"
"    MOV     R2, SP \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFC925BC \n"
"    CMP     R0, #1 \n"
"    MOV     R4, R0 \n"
"    CMPNE   R4, #5 \n"
"    BNE     loc_FFC93AF0 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, R4 \n"
"    LDR     R1, [R0, #0x7C]! \n"
"    LDR     R12, [R0, #0xC]! \n"
"    LDR     R3, [R0, #4] \n"
"    MOV     R0, SP \n"
"    BLX     R12 \n"
"    B       loc_FFC93B28 \n"

"loc_FFC93AF0:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    CMP     R4, #2 \n"
"    LDR     R3, [R0, #0x8C] \n"
"    CMPNE   R4, #6 \n"
"    BNE     loc_FFC93B3C \n"
"    LDR     R12, [R0, #0x88] \n"
"    MOV     R0, SP \n"
"    MOV     R2, R4 \n"
"    MOV     R1, #1 \n"
"    BLX     R12 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, SP \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFC93544 \n"

"loc_FFC93B28:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R2, [SP, #0xC] \n"
"    MOV     R1, R4 \n"
"    BL      sub_FFC93798 \n"
"    B       loc_FFC93DD4 \n"

"loc_FFC93B3C:\n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R12, [R0, #0x88] \n"
"    ADD     R0, R0, #4 \n"
"    MOV     R2, R4 \n"
"    BLX     R12 \n"
"    B       loc_FFC93DD4 \n"

"loc_FFC93B54:\n"
"    CMP     R1, #0x20 \n"
"    CMPNE   R1, #0x21 \n"
"    BNE     loc_FFC93BA0 \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R1, R0, R1, LSL#2 \n"
"    SUB     R1, R1, #8 \n"
"    LDMIA   R1, {R2-R4} \n"
"    STMIA   R6, {R2-R4} \n"
"    BL      sub_FFC918F8 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC91BF4 \n"
"    B       loc_FFC93DD4 \n"

"loc_FFC93BA0:\n"
"    ADD     R1, R0, #4 \n"
"    LDMIA   R1, {R2,R3,R12} \n"
"    STMIA   R6, {R2,R3,R12} \n"
"    LDR     R1, [R0] \n"
"    CMP     R1, #0x23 \n"
"    ADDLS   PC, PC, R1, LSL#2 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93C4C \n"
"    B       loc_FFC93C4C \n"
"    B       loc_FFC93C9C \n"
"    B       loc_FFC93CA4 \n"
"    B       loc_FFC93CA4 \n"
"    B       loc_FFC93CA4 \n"
"    B       loc_FFC93C4C \n"
"    B       loc_FFC93C9C \n"
"    B       loc_FFC93CA4 \n"
"    B       loc_FFC93CA4 \n"
"    B       loc_FFC93CBC \n"
"    B       loc_FFC93CBC \n"
"    B       loc_FFC93DA8 \n"
"    B       loc_FFC93DB0 \n"
"    B       loc_FFC93DB0 \n"
"    B       loc_FFC93DB0 \n"
"    B       loc_FFC93DB0 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93CAC \n"
"    B       loc_FFC93CB4 \n"
"    B       loc_FFC93CB4 \n"
"    B       loc_FFC93CC8 \n"
"    B       loc_FFC93CD0 \n"
"    B       loc_FFC93D00 \n"
"    B       loc_FFC93D30 \n"
"    B       loc_FFC93D60 \n"
"    B       loc_FFC93D90 \n"
"    B       loc_FFC93D90 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93DB4 \n"
"    B       loc_FFC93D98 \n"
"    B       loc_FFC93DA0 \n"

"loc_FFC93C4C:\n"
"    BL      sub_FFC907DC \n"
"    B       loc_FFC93DB4 \n"
//SKIP DATA

"loc_FFC93C9C:\n"
"    BL      sub_FFC90A64 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93CA4:\n"
"    BL      sub_FFC90C68 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93CAC:\n"
"    BL      sub_FFC90ED0 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93CB4:\n"
"    BL      sub_FFC910C4 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93CBC:\n"
"    BL      sub_FFC91328_my \n"  // --> Patched. Old value = 0xFFC91328.
"    MOV     R4, #0 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93CC8:\n"
"    BL      sub_FFC91464 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93CD0:\n"
"    LDRH    R1, [R0, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R0, #0xC] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC94B9C \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93D00:\n"
"    LDRH    R1, [R0, #4] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R5, #8] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC94D18 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93D30:\n"
"    LDRH    R1, [R5] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R0, #6] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R5, #8] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC94DC4 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93D60:\n"
"    LDRH    R1, [R5] \n"
"    STRH    R1, [SP, #0x10] \n"
"    LDRH    R1, [R5, #2] \n"
"    STRH    R1, [SP, #0x12] \n"
"    LDRH    R1, [R5, #4] \n"
"    STRH    R1, [SP, #0x14] \n"
"    LDRH    R1, [R5, #6] \n"
"    STRH    R1, [SP, #0x16] \n"
"    LDRH    R1, [R0, #0xC] \n"
"    STRH    R1, [SP, #0x18] \n"
"    BL      sub_FFC94E64 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93D90:\n"
"    BL      sub_FFC916BC \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93D98:\n"
"    BL      sub_FFC91CF8 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93DA0:\n"
"    BL      sub_FFC91F2C \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93DA8:\n"
"    BL      sub_FFC920A4 \n"
"    B       loc_FFC93DB4 \n"

"loc_FFC93DB0:\n"
"    BL      sub_FFC9223C \n"

"loc_FFC93DB4:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R1, [R0, #0x7C] \n"
"    LDR     R3, [R0, #0x88] \n"
"    LDR     R2, [R0, #0x8C] \n"
"    ADD     R0, R0, #4 \n"
"    BLX     R3 \n"
"    CMP     R4, #1 \n"
"    BNE     loc_FFC93E1C \n"

"loc_FFC93DD4:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    MOV     R2, #0xC \n"
"    LDR     R1, [R0, #0x7C] \n"
"    ADD     R1, R1, R1, LSL#1 \n"
"    ADD     R0, R0, R1, LSL#2 \n"
"    SUB     R4, R0, #8 \n"
"    LDR     R0, =0x44594 \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFE4A528 \n"
"    LDR     R0, =0x445A0 \n"
"    MOV     R2, #0xC \n"
"    ADD     R1, SP, #0x10 \n"
"    BL      sub_FFE4A528 \n"
"    LDR     R0, =0x445AC \n"
"    MOV     R2, #0xC \n"
"    MOV     R1, R4 \n"
"    BL      sub_FFE4A528 \n"
"    B       loc_FFC93E94 \n"

"loc_FFC93E1C:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    LDR     R0, [R0] \n"
"    CMP     R0, #0xB \n"
"    BNE     loc_FFC93E64 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [SP] \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #0 \n"
"    BL      sub_FFC905E4 \n"
"    MOV     R3, #0 \n"
"    STR     R3, [SP] \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #0 \n"
"    B       loc_FFC93E90 \n"

"loc_FFC93E64:\n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #1 \n"
"    STR     R3, [SP] \n"
"    BL      sub_FFC905E4 \n"
"    MOV     R3, #1 \n"
"    MOV     R2, #1 \n"
"    MOV     R1, #1 \n"
"    MOV     R0, #1 \n"
"    STR     R3, [SP] \n"

"loc_FFC93E90:\n"
"    BL      sub_FFC90724 \n"

"loc_FFC93E94:\n"
"    LDR     R0, [SP, #0x1C] \n"
"    BL      sub_FFC94B28 \n"
"    B       loc_FFC93868 \n"
);
}

/*************************************************************/
//** sub_FFC91328_my @ 0xFFC91328 - 0xFFC913E4, length=48
void __attribute__((naked,noinline)) sub_FFC91328_my() {
asm volatile (
"    STMFD   SP!, {R4-R8,LR} \n"
"    LDR     R7, =0x68DC \n"
"    MOV     R4, R0 \n"
"    LDR     R0, [R7, #0x1C] \n"
"    MOV     R1, #0x3E \n"
"    BL      sub_FFC18FE0 /*_ClearEventFlag*/ \n"
"    LDRSH   R0, [R4, #4] \n"
"    MOV     R2, #0 \n"
"    MOV     R1, #0 \n"
"    BL      sub_FFC90378 \n"
"    MOV     R6, R0 \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC90484 \n"
"    LDRSH   R0, [R4, #8] \n"
"    BL      sub_FFC904DC \n"
"    LDRSH   R0, [R4, #0xA] \n"
"    BL      sub_FFC90534 \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    BL      sub_FFC9058C \n"
"    MOV     R5, R0 \n"
"    LDR     R0, [R4] \n"
"    LDR     R8, =0x445AC \n"
"    CMP     R0, #0xB \n"
"    MOVEQ   R6, #0 \n"
"    MOVEQ   R5, #0 \n"
"    BEQ     loc_FFC913B8 \n"
"    CMP     R6, #1 \n"
"    BNE     loc_FFC913B8 \n"
"    LDRSH   R0, [R4, #4] \n"
"    LDR     R1, =0xFFC902D4 \n"
"    MOV     R2, #2 \n"
"    BL      sub_FFD03704 \n"
"    STRH    R0, [R4, #4] \n"
"    MOV     R0, #0 \n"
"    STR     R0, [R7, #0x28] \n"
"    B       loc_FFC913C0 \n"

"loc_FFC913B8:\n"
"    LDRH    R0, [R8] \n"
"    STRH    R0, [R4, #4] \n"

"loc_FFC913C0:\n"
"    CMP     R5, #1 \n"
"    LDRNEH  R0, [R8, #8] \n"
"    BNE     loc_FFC913DC \n"
"    LDRSH   R0, [R4, #0xC] \n"
"    LDR     R1, =0xFFC90368 \n"
"    MOV     R2, #0x20 \n"
"    BL      sub_FFC94B58 \n"

"loc_FFC913DC:\n"
"    STRH    R0, [R4, #0xC] \n"
"    LDRSH   R0, [R4, #6] \n"
"    BL      sub_FFC751B4_my \n"  // --> Patched. Old value = 0xFFC751B4.
"    LDR     PC, =0xFFC913E8 \n"  // Continue in firmware
);
}

/*************************************************************/
//** sub_FFC751B4_my @ 0xFFC751B4 - 0xFFC7521C, length=27
void __attribute__((naked,noinline)) sub_FFC751B4_my() {
asm volatile (
"    STMFD   SP!, {R4-R6,LR} \n"
"    LDR     R5, =0x6384 \n"
"    MOV     R4, R0 \n"
"    LDR     R0, [R5, #4] \n"
"    CMP     R0, #1 \n"
"    MOVNE   R1, #0x16C \n"
"    LDRNE   R0, =0xFFC74F4C /*'Shutter.c'*/ \n"
"    BLNE    _DebugAssert \n"
"    CMN     R4, #0xC00 \n"
"    LDREQSH R4, [R5, #2] \n"
"    CMN     R4, #0xC00 \n"
"    LDREQ   R1, =0x172 \n"
"    LDREQ   R0, =0xFFC74F4C /*'Shutter.c'*/ \n"
"    STRH    R4, [R5, #2] \n"
"    BLEQ    _DebugAssert \n"
"    MOV     R0, R4 \n"
"    BL      apex2us \n"  // --> Patched. Old value = _apex2us.
"    MOV     R4, R0 \n"
//"  BL      _sub_FFCA365C \n"  // --> Nullsub call removed.
"    MOV     R0, R4 \n"
"    BL      sub_FFCA77DC \n"
"    TST     R0, #1 \n"
"    LDRNE   R1, =0x177 \n"
"    LDMNEFD SP!, {R4-R6,LR} \n"
"    LDRNE   R0, =0xFFC74F4C /*'Shutter.c'*/ \n"
"    BNE     _DebugAssert \n"
"    LDMFD   SP!, {R4-R6,PC} \n"
);
}
